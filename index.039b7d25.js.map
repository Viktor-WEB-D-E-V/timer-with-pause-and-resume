{"mappings":"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","sources":["node_modules/@swc/helpers/lib/_class_call_check.js","node_modules/@swc/helpers/lib/_create_class.js","src/js/storage.js","src/script.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classCallCheck;\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _createClass;\nfunction _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nfunction _defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\n","const load = key => {\n  try {\n    const state = localStorage.getItem(key);\n    return state === null ? undefined : JSON.parse(state);\n  } catch (error) {\n    console.error('Get state error', error.message);\n  }\n};\nconst save = (key, value) => {\n  try {\n    const state = JSON.stringify(value);\n    localStorage.setItem(key, state);\n  } catch (error) {\n    console.error('Get state error', error.message);\n  }\n};\nconst remove = key => {\n  try {\n    localStorage.removeItem(key);\n  } catch (error) {\n    console.error('Get state error', error.message);\n  }\n};\n\nexport { load, save, remove };\n","import { load, save, remove } from './js/storage';\n\nconst TIMER_KEY = 'timer-state';\n\nconst refs = {\n  clockface: document.querySelector('.clockface'),\n  startBtn: document.querySelector('.timer-btn[data-start]'),\n  stopBtn: document.querySelector('.timer-btn[data-stop]'),\n  clearBtn: document.querySelector('.timer-btn[data-clear]'),\n};\n\nclass Timer {\n  constructor({ onTick }) {\n    this.timerId = null;\n    this.active = false;\n\n    this.startTime = 0;\n    this.deltaTime = 0;\n\n    this.onTick = onTick;\n\n    this.init();\n    this.loadStateFromLS();\n  }\n  //The method displays a default time\n  init() {\n    this.onTick(this.getTimeComponents());\n  }\n\n  loadStateFromLS() {\n    const savedState = load(TIMER_KEY);\n    if (savedState) {\n      this.active = savedState.active;\n      this.startTime = savedState.start;\n      this.deltaTime = savedState.delta;\n\n      this.onTick(this.getTimeComponents(this.deltaTime));\n\n      if (this.active) {\n        this.resumeTimerAfterReload();\n      }\n    }\n  }\n\n  saveStateToLS() {\n    save(TIMER_KEY, {\n      active: this.active,\n      start: this.startTime,\n      delta: this.deltaTime,\n    });\n  }\n\n  resumeTimerAfterReload() {\n    this.startTime = Date.now() - this.deltaTime;\n    this.timerId = setInterval(() => {\n      const currentTime = Date.now();\n      this.deltaTime = currentTime - this.startTime;\n\n      this.onTick(this.getTimeComponents(this.deltaTime));\n      this.saveStateToLS();\n    }, 1000);\n  }\n\n  start() {\n    //Prevent multiple timer starts\n    if (this.active) return;\n    //Change the state to active\n    this.active = true;\n\n    this.startTime = Date.now() - this.deltaTime;\n    //Save state to localStorage timer start working\n    this.saveStateToLS();\n\n    //Refresh markup every 1 sec\n    this.timerId = setInterval(() => {\n      const currentTime = Date.now();\n\n      this.deltaTime = currentTime - this.startTime;\n      const time = this.getTimeComponents(this.deltaTime);\n\n      this.onTick(time);\n      //Update state after each tick\n      this.saveStateToLS();\n    }, 1000);\n  }\n\n  stop() {\n    clearInterval(this.timerId);\n    this.timerId = null;\n    this.active = false;\n    //Save to stage localStorage after press stop btn\n    this.saveStateToLS();\n    this.onTick(this.getTimeComponents(this.deltaTime));\n  }\n\n  clear() {\n    clearInterval(this.timerId);\n    this.timerId = null;\n    this.active = false;\n    this.startTime = 0;\n    this.deltaTime = 0;\n    //Clear locaStorage;\n    remove(TIMER_KEY);\n    this.onTick(this.getTimeComponents());\n  }\n  // The methods converts time(milliseconds) to other values, such as hours, minutes and seconds\n  getTimeComponents(time = 0) {\n    const hours = this.pad(\n      Math.floor((time % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))\n    );\n    const mins = this.pad(Math.floor((time % (1000 * 60 * 60)) / (1000 * 60)));\n    const secs = this.pad(Math.floor((time % (1000 * 60)) / 1000));\n\n    return { hours, mins, secs };\n  }\n  //The methods adds 0 to the number if the string has < 2 characters\n  pad(value) {\n    return String(value).padStart(2, '0');\n  }\n}\n\nconst timer = new Timer({\n  onTick: updateTimerInterface,\n});\n\nrefs.startBtn.addEventListener('click', () => {\n  timer.start();\n});\n\nrefs.stopBtn.addEventListener('click', () => {\n  timer.stop();\n});\nrefs.clearBtn.addEventListener('click', () => {\n  timer.clear();\n});\n\nfunction updateTimerInterface({ hours, mins, secs }) {\n  refs.clockface.textContent = `Hours: ${hours} Minutes: ${mins} Seconds: ${secs}`;\n}\n"],"names":["Object","defineProperty","$665014edacbfe17b$exports","value","default","instance","Constructor","TypeError","$74e7f8130373505f$var$_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","$74e7f8130373505f$exports","protoProps","staticProps","prototype","$e40a24b7fc93604f$export$11e63f7b0f3d9900","state","localStorage","getItem","undefined","JSON","parse","error","console","message","$e40a24b7fc93604f$export$a1544dad697b423d","stringify","setItem","$e40a24b7fc93604f$export$cd7f480d6b8286c3","removeItem","$81cdcb03b6ee87e9$var$TIMER_KEY","$81cdcb03b6ee87e9$var$refs","clockface","document","querySelector","startBtn","stopBtn","clearBtn","$81cdcb03b6ee87e9$var$Timer","Timer","param","onTick","this","timerId","active","startTime","deltaTime","init","loadStateFromLS","getTimeComponents","savedState","start","delta","resumeTimerAfterReload","Date","now","setInterval","currentTime","_this","saveStateToLS","time","clearInterval","arguments","hours","pad","Math","floor","mins","secs","String","padStart","$81cdcb03b6ee87e9$var$timer","textContent","concat","addEventListener","stop","clear"],"version":3,"file":"index.039b7d25.js.map"}