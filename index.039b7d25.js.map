{"mappings":"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","sources":["node_modules/@swc/helpers/lib/_class_call_check.js","node_modules/@swc/helpers/lib/_create_class.js","src/js/storage.js","src/script.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classCallCheck;\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _createClass;\nfunction _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nfunction _defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\n","const load = key => {\r\n  try {\r\n    const state = localStorage.getItem(key);\r\n    return state === null ? undefined : JSON.parse(state);\r\n  } catch (error) {\r\n    console.error('Get state error', error.message);\r\n  }\r\n};\r\nconst save = (key, value) => {\r\n  try {\r\n    const state = JSON.stringify(value);\r\n    localStorage.setItem(key, state);\r\n  } catch (error) {\r\n    console.error('Get state error', error.message);\r\n  }\r\n};\r\nconst remove = key => {\r\n  try {\r\n    localStorage.removeItem(key);\r\n  } catch (error) {\r\n    console.error('Get state error', error.message);\r\n  }\r\n};\r\n\r\nexport { load, save, remove };\r\n","import { load, save, remove } from './js/storage';\r\n\r\nconst TIMER_KEY = 'timer-state';\r\n\r\nconst refs = {\r\n  clockface: document.querySelector('.clockface'),\r\n  startBtn: document.querySelector('.timer-btn[data-start]'),\r\n  stopBtn: document.querySelector('.timer-btn[data-stop]'),\r\n  clearBtn: document.querySelector('.timer-btn[data-clear]'),\r\n};\r\n\r\nclass Timer {\r\n  constructor({ onTick }) {\r\n    this.timerId = null;\r\n    this.active = false;\r\n\r\n    this.startTime = 0;\r\n    this.deltaTime = 0;\r\n\r\n    this.onTick = onTick;\r\n\r\n    this.init();\r\n    this.loadStateFromLS();\r\n  }\r\n  //The method displays a default time\r\n  init() {\r\n    this.onTick(this.getTimeComponents());\r\n  }\r\n\r\n  loadStateFromLS() {\r\n    const savedState = load(TIMER_KEY);\r\n    if (savedState) {\r\n      this.active = savedState.active;\r\n      this.startTime = savedState.start;\r\n      this.deltaTime = savedState.delta;\r\n\r\n      this.onTick(this.getTimeComponents(this.deltaTime));\r\n\r\n      if (this.active) {\r\n        this.resumeTimerAfterReload();\r\n      }\r\n    }\r\n  }\r\n\r\n  saveStateToLS() {\r\n    save(TIMER_KEY, {\r\n      active: this.active,\r\n      start: this.startTime,\r\n      delta: this.deltaTime,\r\n    });\r\n  }\r\n\r\n  resumeTimerAfterReload() {\r\n    this.startTime = Date.now() - this.deltaTime;\r\n    this.timerId = setInterval(() => {\r\n      const currentTime = Date.now();\r\n      this.deltaTime = currentTime - this.startTime;\r\n\r\n      this.onTick(this.getTimeComponents(this.deltaTime));\r\n      this.saveStateToLS();\r\n    }, 1000);\r\n  }\r\n\r\n  start() {\r\n    //Prevent multiple timer starts\r\n    if (this.active) return;\r\n    //Change the state to active\r\n    this.active = true;\r\n\r\n    this.startTime = Date.now() - this.deltaTime;\r\n    //Save state to localStorage timer start working\r\n    this.saveStateToLS();\r\n\r\n    //Refresh markup every 1 sec\r\n    this.timerId = setInterval(() => {\r\n      const currentTime = Date.now();\r\n\r\n      this.deltaTime = currentTime - this.startTime;\r\n      const time = this.getTimeComponents(this.deltaTime);\r\n\r\n      this.onTick(time);\r\n      //Update state after each tick\r\n      this.saveStateToLS();\r\n    }, 1000);\r\n  }\r\n\r\n  stop() {\r\n    clearInterval(this.timerId);\r\n    this.timerId = null;\r\n    this.active = false;\r\n    //Save to stage localStorage after press stop btn\r\n    this.saveStateToLS();\r\n    this.onTick(this.getTimeComponents(this.deltaTime));\r\n  }\r\n\r\n  clear() {\r\n    clearInterval(this.timerId);\r\n    this.timerId = null;\r\n    this.active = false;\r\n    this.startTime = 0;\r\n    this.deltaTime = 0;\r\n    //Clear locaStorage;\r\n    remove(TIMER_KEY);\r\n    this.onTick(this.getTimeComponents());\r\n  }\r\n  // The methods converts time(milliseconds) to other values, such as hours, minutes and seconds\r\n  getTimeComponents(time = 0) {\r\n    const hours = this.pad(\r\n      Math.floor((time % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))\r\n    );\r\n    const mins = this.pad(Math.floor((time % (1000 * 60 * 60)) / (1000 * 60)));\r\n    const secs = this.pad(Math.floor((time % (1000 * 60)) / 1000));\r\n\r\n    return { hours, mins, secs };\r\n  }\r\n  //The methods adds 0 to the number if the string has < 2 characters\r\n  pad(value) {\r\n    return String(value).padStart(2, '0');\r\n  }\r\n}\r\n\r\nconst timer = new Timer({\r\n  onTick: updateTimerInterface,\r\n});\r\n\r\nrefs.startBtn.addEventListener('click', () => {\r\n  timer.start();\r\n});\r\n\r\nrefs.stopBtn.addEventListener('click', () => {\r\n  timer.stop();\r\n});\r\nrefs.clearBtn.addEventListener('click', () => {\r\n  timer.clear();\r\n});\r\n\r\nfunction updateTimerInterface({ hours, mins, secs }) {\r\n  refs.clockface.textContent = `Hours: ${hours} Minutes: ${mins} Seconds: ${secs}`;\r\n}\r\n"],"names":["Object","defineProperty","$665014edacbfe17b$exports","value","default","instance","Constructor","TypeError","$74e7f8130373505f$var$_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","$74e7f8130373505f$exports","protoProps","staticProps","prototype","$e40a24b7fc93604f$export$11e63f7b0f3d9900","state","localStorage","getItem","undefined","JSON","parse","error","console","message","$e40a24b7fc93604f$export$a1544dad697b423d","stringify","setItem","$e40a24b7fc93604f$export$cd7f480d6b8286c3","removeItem","$81cdcb03b6ee87e9$var$TIMER_KEY","$81cdcb03b6ee87e9$var$refs","clockface","document","querySelector","startBtn","stopBtn","clearBtn","$81cdcb03b6ee87e9$var$Timer","Timer","param","onTick","this","timerId","active","startTime","deltaTime","init","loadStateFromLS","getTimeComponents","savedState","start","delta","resumeTimerAfterReload","Date","now","setInterval","currentTime","_this","saveStateToLS","time","clearInterval","arguments","hours","pad","Math","floor","mins","secs","String","padStart","$81cdcb03b6ee87e9$var$timer","textContent","concat","addEventListener","stop","clear"],"version":3,"file":"index.039b7d25.js.map"}